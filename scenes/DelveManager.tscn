[gd_scene load_steps=10 format=3 uid="uid://h5ydrs5ls1q2"]

[ext_resource type="Script" uid="uid://wht418tua6wp" path="res://scripts/delve/DelveManager.cs" id="1_cdpr4"]
[ext_resource type="Script" uid="uid://dckve1x8jqn6e" path="res://scripts/delve/WallManager.cs" id="1_ydd21"]
[ext_resource type="Script" uid="uid://cp7iv1e3cjmcr" path="res://scripts/delve/UI/Ui.cs" id="2_cdpr4"]
[ext_resource type="Texture2D" uid="uid://5mvvnxw4olnn" path="res://sprites/UI/roof.png" id="3_n5hqi"]
[ext_resource type="PackedScene" uid="uid://cwk1m3cjvvvc4" path="res://scenes/UI/ScoreHolder.tscn" id="4_ls6tr"]
[ext_resource type="Texture2D" uid="uid://cqdi6qkw5l7xt" path="res://sprites/ore/zinc/tilemap.png" id="5_7bcp7"]
[ext_resource type="PackedScene" uid="uid://bhegy8bffeb23" path="res://scenes/UI/Timer.tscn" id="6_80v1x"]
[ext_resource type="Script" uid="uid://cyacbjfxvsupl" path="res://scripts/delve/Countdown.cs" id="7_3xwkl"]
[ext_resource type="PackedScene" uid="uid://v1u1xmvj31b5" path="res://scenes/UI/GameOverDialogBox.tscn" id="8_eu0o8"]

[node name="DelveManager" type="Node2D" node_paths=PackedStringArray("WallManager", "Ui", "Countdown", "GameOverDialogBox")]
script = ExtResource("1_cdpr4")
WallManager = NodePath("WallManager")
Ui = NodePath("UI")
Countdown = NodePath("Countdown")
GameOverDialogBox = NodePath("GameOverDialogBox")

[node name="WallManager" type="Node2D" parent="." node_paths=PackedStringArray("FallingCutoutHolder", "WallHolder")]
script = ExtResource("1_ydd21")
WallQueueSize = 4
InitialWallsRendered = 2
CutoutEdgeBuffer = 15
FallingCutoutHolder = NodePath("FallingCutoutHolder")
WallHolder = NodePath("WallHolder")

[node name="WallHolder" type="Node2D" parent="WallManager"]

[node name="FallingCutoutHolder" type="Node2D" parent="WallManager"]

[node name="UI" type="Control" parent="." node_paths=PackedStringArray("goldScoreHolder", "zincScoreHolder")]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("2_cdpr4")
goldScoreHolder = NodePath("GoldOreScore")
zincScoreHolder = NodePath("ZincOreScore")
metadata/_edit_use_anchors_ = true

[node name="RightBorder" type="Sprite2D" parent="UI"]
position = Vector2(630, 367)
rotation = 4.712389
texture = ExtResource("3_n5hqi")
centered = false
region_enabled = true
region_rect = Rect2(280, 0, 360, 20)
metadata/_edit_lock_ = true

[node name="LeftBorder" type="Sprite2D" parent="UI"]
position = Vector2(10, 7)
rotation = 1.5707964
texture = ExtResource("3_n5hqi")
centered = false
region_enabled = true
region_rect = Rect2(0, 0, 360, 20)
metadata/_edit_lock_ = true

[node name="TopBorder" type="Sprite2D" parent="UI"]
texture = ExtResource("3_n5hqi")
centered = false
metadata/_edit_lock_ = true

[node name="GoldOreScore" parent="UI" instance=ExtResource("4_ls6tr")]
layout_mode = 0
offset_left = 89.0
offset_top = 4.0
offset_right = 132.0
offset_bottom = 17.0

[node name="ZincOreScore" parent="UI" instance=ExtResource("4_ls6tr")]
layout_mode = 0
offset_left = 146.0
offset_top = 4.0
offset_right = 189.0
offset_bottom = 17.0
spriteTexture = ExtResource("5_7bcp7")

[node name="Timer" parent="UI" instance=ExtResource("6_80v1x")]
layout_mode = 0
offset_left = 537.0
offset_top = 3.0
offset_right = 580.0
offset_bottom = 16.0

[node name="Countdown" type="Timer" parent="."]
script = ExtResource("7_3xwkl")
CountDownTime = 30

[node name="GameOverDialogBox" parent="." instance=ExtResource("8_eu0o8")]
position = Vector2(134, 52)

[connection signal="OreCutout" from="WallManager" to="UI" method="ProcessOreCutout"]
[connection signal="CountdownCompleted" from="Countdown" to="." method="CountdownCompleted"]
[connection signal="CountdownIncremented" from="Countdown" to="UI/Timer" method="UpdateTime"]
[connection signal="timeout" from="Countdown" to="Countdown" method="IncrementCountdown"]
[connection signal="RestartDelve" from="GameOverDialogBox" to="." method="RestartHandler"]
